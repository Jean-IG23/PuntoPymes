# ğŸ“¸ VISUAL: FLUJO DE IMÃGENES CON DIAGRAMAS

---

## 1ï¸âƒ£ FLUJO GENERAL (Secuencia)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        USUARIO (Browser)                                 â”‚
â”‚  1. Hace clic en "Seleccionar Foto"                                     â”‚
â”‚  2. Elige archivo: "mi_foto.jpg" (2 MB)                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼ (FileReader API)
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ ANGULAR FRONTEND   â”‚
                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                    â”‚ FileReader         â”‚
                    â”‚ readAsDataURL()    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Preview en navegador    â”‚
                    â”‚ <img src="data:image">  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼ (FormData)
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ FORMA FormData           â”‚
                    â”‚ append('foto', file)     â”‚
                    â”‚ append('nombres', ...)   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ AJAX POST/PATCH          â”‚
                    â”‚ Content-Type: multipart  â”‚
                    â”‚ To: /api/empleados/      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚            DJANGO BACKEND (Python)                   â”‚
        â”‚                                                      â”‚
        â”‚ 1. Recibe MultipartFormData                         â”‚
        â”‚ 2. Parsea campos y archivos                         â”‚
        â”‚ 3. Valida tipo MIME (debe ser imagen)              â”‚
        â”‚ 4. Genera nombre Ãºnico:                            â”‚
        â”‚    empleados/550e8400-e29b-41d4-a716-44665544.jpg  â”‚
        â”‚ 5. Guarda en disco:                                â”‚
        â”‚    /media/empleados/550e8400-e29b-41d4-a716...jpg  â”‚
        â”‚ 6. Guarda ruta en BD:                              â”‚
        â”‚    UPDATE personal_empleado SET                    â”‚
        â”‚      foto = 'empleados/550e8400-...'               â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ RESPUESTA JSON                  â”‚
        â”‚ {                               â”‚
        â”‚   "id": 42,                     â”‚
        â”‚   "nombres": "Mateo",           â”‚
        â”‚   "foto": "empleados/550e..."  â”‚
        â”‚ }                               â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼ (Angular recibe)
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ ACTUALIZA TABLA        â”‚
        â”‚ <img src="/media/..."> â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2ï¸âƒ£ ALMACENAMIENTO EN DISCO

```
C:\Users\mateo\Desktop\PuntoPymes\
â”‚
â”œâ”€ manage.py
â”œâ”€ requirements.txt
â”‚
â”œâ”€ media/                           â† CARPETA DE ARCHIVOS SUBIDOS
â”‚  â”‚
â”‚  â”œâ”€ empleados/                    â† Fotos de empleados
â”‚  â”‚  â”œâ”€ 550e8400-e29b-41d4.jpg    (2.1 MB) â† Original, sin comprimir
â”‚  â”‚  â”œâ”€ 550e8400-e29b-41d4.png    (1.8 MB)
â”‚  â”‚  â”œâ”€ 550e8400-e29b-41d4.jpg    (3.2 MB)
â”‚  â”‚  â””â”€ ... (mÃ¡s imÃ¡genes)
â”‚  â”‚
â”‚  â”œâ”€ documentos_empleados/         â† Documentos (si hubiera)
â”‚  â”‚  â””â”€ (vacÃ­o)
â”‚  â”‚
â”‚  â””â”€ contratos/                    â† Contratos (si hubiera)
â”‚     â””â”€ (vacÃ­o)
â”‚
â”œâ”€ personal/
â”‚  â”œâ”€ models.py                     â† Define ImageField
â”‚  â”œâ”€ serializers.py                â† Serializa datos
â”‚  â””â”€ views.py                      â† Maneja upload
â”‚
â”œâ”€ PuntoPymes/
â”‚  â””â”€ settings.py                   â† Config MEDIA_ROOT/URL
â”‚
â””â”€ ... (mÃ¡s archivos)
```

---

## 3ï¸âƒ£ FLUJO EN BASE DE DATOS

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TABLA: personal_empleado (PostgreSQL)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id â”‚ nombres â”‚ apellidos â”‚ foto                â”‚ email       â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1  â”‚ Mateo   â”‚ GarcÃ­a    â”‚ empleados/550e...  â”‚ mateo@...   â”‚
â”‚ 2  â”‚ Juan    â”‚ LÃ³pez     â”‚ empleados/550e...  â”‚ juan@...    â”‚
â”‚ 3  â”‚ MarÃ­a   â”‚ RodrÃ­guez â”‚ NULL                â”‚ maria@...   â”‚
â”‚ 4  â”‚ Carlos  â”‚ Smith     â”‚ empleados/550e...  â”‚ carlos@...  â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â–²                        â–²
      â”‚                        â”‚
      â”‚                        â””â”€ RUTA RELATIVA
      â”‚                           (VARCHAR 100)
      â”‚
      â””â”€ Datos personales
         (se guardan en BD)

    IMPORTANTE:
    â”œâ”€ âœ… Se guarda LA RUTA en BD ("empleados/...")
    â”œâ”€ âŒ NO se guarda la imagen binaria en BD
    â””â”€ âœ… Se guarda la imagen REAL en carpeta /media/
```

---

## 4ï¸âƒ£ CICLO DE VIDA DE UNA IMAGEN

```
FASE 1: USUARIO SELECCIONA
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ <input type="file">          â”‚
â”‚ Navega: C:\Users\mateo\...   â”‚
â”‚ Elige: mi_foto.jpg (2 MB)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
FASE 2: PREVIEW LOCAL (SIN ENVIAR AL SERVIDOR)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FileReader.readAsDataURL()                   â”‚
â”‚ Convierte a: data:image/jpeg;base64,/9j...  â”‚
â”‚ Muestra en <img src>                         â”‚
â”‚ TamaÃ±o en memoria: ~2 MB (base64)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
FASE 3: USUARIO CONFIRMA "GUARDAR"
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FormData.append('foto', file)                â”‚
â”‚ FormData.append('nombres', 'Mateo')          â”‚
â”‚ POST /api/empleados/ (multipart/form-data)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
FASE 4: BACKEND PROCESA
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ request.FILES['foto']                        â”‚
â”‚ â”œâ”€ Valida: Â¿Es imagen?                       â”‚
â”‚ â”œâ”€ Genera nombre: 550e8400-e29b-41d4.jpg    â”‚
â”‚ â”œâ”€ Guarda archivo en:                        â”‚
â”‚ â”‚  /media/empleados/550e8400-e29b-41d4.jpg  â”‚
â”‚ â””â”€ Guarda en BD:                             â”‚
â”‚    foto = 'empleados/550e8400-e29b-41d4'    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
FASE 5: PERSISTENCIA
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Archivo existe en:                           â”‚
â”‚ /media/empleados/550e8400-e29b-41d4.jpg     â”‚
â”‚ TamaÃ±o: 2 MB (ORIGINAL, sin comprimir)      â”‚
â”‚                                              â”‚
â”‚ BD contiene:                                 â”‚
â”‚ foto = 'empleados/550e8400-e29b-41d4.jpg'  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
FASE 6: RECUPERACIÃ“N (Otro usuario abre perfil)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GET /api/empleados/42/                       â”‚
â”‚ Retorna JSON:                                â”‚
â”‚ {                                            â”‚
â”‚   "foto": "empleados/550e8400-e29b-41d4"   â”‚
â”‚ }                                            â”‚
â”‚                                              â”‚
â”‚ Frontend solicita:                           â”‚
â”‚ <img src="/media/empleados/550e...">        â”‚
â”‚                                              â”‚
â”‚ Django sirve archivo desde:                  â”‚
â”‚ /media/empleados/550e8400-e29b-41d4.jpg     â”‚
â”‚ TamaÃ±o transferido: 2 MB (sin comprimir)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5ï¸âƒ£ COMPARATIVA: RESOLUCIÃ“N Y TAMAÃ‘O

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ TABLA COMPARATIVA: COMPRESIÃ“N vs SIN COMPRESIÃ“N             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Aspecto           â”‚ Sin Comprimir â”‚ Con Comprimir (Reco.)  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Formato           â”‚ Original      â”‚ JPEG Quality 85%       â”‚
â”‚ ResoluciÃ³n MÃ¡x    â”‚ Sin lÃ­mite     â”‚ 1000x1000 (resized)    â”‚
â”‚ TamaÃ±o archivo    â”‚ 2-5 MB        â”‚ 200-400 KB             â”‚
â”‚ Tiempo carga      â”‚ 2-5 seg       â”‚ 200-400 ms             â”‚
â”‚ Espacio 100 emp.  â”‚ 200-500 MB    â”‚ 20-40 MB               â”‚
â”‚ Espacio 10k emp.  â”‚ 20-50 GB      â”‚ 2-4 GB                 â”‚
â”‚ PÃ©rdida visual    â”‚ Ninguna       â”‚ Imperceptible          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6ï¸âƒ£ VALIDACIÃ“N ACTUAL vs RECOMENDADO

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ VALIDACIONES DURANTE UPLOAD                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤

ACTUAL (Django ImageField solo):
â”œâ”€ âœ… Valida: Â¿Es imagen? (JPEG, PNG, GIF, etc)
â”œâ”€ âœ… Valida: Tipo MIME correcto
â”œâ”€ âŒ NO valida: TamaÃ±o mÃ¡ximo (problema)
â””â”€ âŒ NO valida: ResoluciÃ³n mÃ¡xima (problema)

RECOMENDADO (Con mejoras):
â”œâ”€ âœ… Valida: Â¿Es imagen?
â”œâ”€ âœ… Valida: Tipo MIME
â”œâ”€ âœ… Valida: TamaÃ±o â‰¤ 5 MB
â”œâ”€ âœ… Valida: ResoluciÃ³n â‰¤ 4000x4000
â”œâ”€ âœ… Comprime: Quality 85%
â””â”€ âœ… Redimensiona: Max 1000x1000
```

---

## 7ï¸âƒ£ RUTAS Y URLs

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DEFINICIONES EN settings.py                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤

MEDIA_ROOT = os.path.join(BASE_DIR, 'media')
â†“
/c/Users/mateo/Desktop/PuntoPymes/media/

MEDIA_URL = '/media/'
â†“
http://localhost:8000/media/

RESULTADO:
Archivo guardado en: /media/empleados/550e8400-e29b.jpg
Se accede desde:    /media/empleados/550e8400-e29b.jpg
URL completa:       http://localhost:8000/media/empleados/...
```

---

## 8ï¸âƒ£ MODELO A NIVEL DE CÃ“DIGO

```python
# models.py
class Empleado(models.Model):
    # ... otros campos ...
    
    # ESTE CAMPO MANEJA TODO:
    foto = models.ImageField(
        upload_to='empleados/',           # â† Subcarpeta
        null=True,                        # â† Puede ser NULL
        blank=True,                       # â† No obligatorio
        verbose_name="Foto de Perfil"     # â† Label
    )
    
    # AUTOMÃTICAMENTE:
    # 1. Valida que sea imagen
    # 2. Genera nombre Ãºnico (evita colisiones)
    # 3. Guarda en: media/empleados/{name}
    # 4. Almacena ruta en BD
    # 5. Servido desde: MEDIA_URL + ruta
    
    # NO HACE (Problemas):
    # âŒ Validar tamaÃ±o
    # âŒ Validar resoluciÃ³n
    # âŒ Comprimir
    # âŒ Redimensionar
```

---

## 9ï¸âƒ£ PROBLEMAS VISUALES

```
PROBLEMA 1: Imagen muy pesada
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Usuario sube foto 3000x  â”‚
â”‚ 2000 de 4 MB             â”‚
â”‚                          â”‚
â”‚ Se guarda: 4 MB exactos  â”‚
â”‚ Tiempo de carga: 5-8 seg â”‚
â”‚ Peor experiencia UX      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

SOLUCIÃ“N:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Comprimir automÃ¡tico:    â”‚
â”‚ 3000x2000 â†’ 1000x667    â”‚
â”‚ 4 MB â†’ 300 KB           â”‚
â”‚ Tiempo: 200-300 ms      â”‚
â”‚ Mejor UX âœ…             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


PROBLEMA 2: Sin validaciÃ³n
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Usuario intenta subir:   â”‚
â”‚ - Archivo 50 MB        â”‚
â”‚ - ResoluciÃ³n 8000x6000  â”‚
â”‚                         â”‚
â”‚ Django acepta TODO âŒ  â”‚
â”‚ Llena disco duro        â”‚
â”‚ Sistema se cuelga       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

SOLUCIÃ“N:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Validar:                 â”‚
â”‚ - Max 5 MB              â”‚
â”‚ - Max 4000x4000        â”‚
â”‚ Rechaza con error âœ…    â”‚
â”‚ Usuario entiende        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”Ÿ RESUMEN VISUAL

```
                    USUARIO
                      â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   SELECCIONA IMAGEN      â”‚
         â”‚  (2 MB JPG 3000x2000)    â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  PREVIEW LOCAL (sin env)  â”‚
         â”‚  (convertido a base64)    â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  CONFIRMA Y ENVÃA        â”‚
         â”‚  (FormData + PATCH)      â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  DJANGO BACKEND          â”‚
         â”‚  â”œâ”€ Recibe archivo       â”‚
         â”‚  â”œâ”€ Valida tipo          â”‚
         â”‚  â”œâ”€ Genera nombre Ãºnico  â”‚
         â”‚  â”œâ”€ Guarda en /media/    â”‚
         â”‚  â””â”€ Guarda ruta en BD    â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  PERSISTENCIA            â”‚
         â”‚  Archivo: 2 MB (sin comp)â”‚
         â”‚  BD: Ruta              â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  RECUPERACIÃ“N            â”‚
         â”‚  GET /api/empleados/42   â”‚
         â”‚  â†“                       â”‚
         â”‚  <img src="/media/...">  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š IMPACTO EN SERVIDOR

```
SIN COMPRESIÃ“N:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 100 empleados = 200-500 MB        â”‚
â”‚ 1,000 empleados = 2-5 GB          â”‚
â”‚ 10,000 empleados = 20-50 GB       â”‚
â”‚ âš ï¸ Llena disco rÃ¡pidamente        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

CON COMPRESIÃ“N (RECOMENDADO):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 100 empleados = 20-40 MB          â”‚
â”‚ 1,000 empleados = 200-400 MB      â”‚
â”‚ 10,000 empleados = 2-4 GB         â”‚
â”‚ âœ… Uso eficiente                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

DIFERENCIA: ~10x MENOR CON COMPRESIÃ“N
```

