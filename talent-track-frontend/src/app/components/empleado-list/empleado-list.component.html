<div class="min-h-screen bg-white">
  <!-- Header -->
  <div class="bg-white border-b border-gray-200">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
      <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4">
        <div>
          <h1 class="text-3xl font-bold text-gray-900">Directorio de Personal</h1>
          <p class="text-gray-500 text-sm mt-1">Gestiona el equipo de la empresa</p>
        </div>
        <div class="flex flex-col sm:flex-row gap-3 w-full sm:w-auto">
          <button routerLink="/gestion/carga-masiva" class="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium text-sm">
            ðŸ“¥ Importar
          </button>
          <button routerLink="/gestion/empleados/nuevo" class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium text-sm">
            âž• Nuevo Empleado
          </button>
        </div>
      </div>
    </div>
  </div>

  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    
    <!-- FILTROS PEGAJOSOS -->
    <div class="bg-white border border-gray-200 rounded-lg shadow-sm p-4 mb-6 sticky top-0 z-10">
      <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
        
        <!-- BÃºsqueda -->
        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-2">Buscar</label>
          <input
            type="text"
            [(ngModel)]="textoBusqueda"
            (input)="filtrar()"
            placeholder="Nombre, cÃ©dula, cargo..."
            class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
          />
        </div>

        <!-- Sucursal -->
        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-2">Sucursal</label>
          <select
            [(ngModel)]="filtroSucursal"
            (change)="filtrar()"
            class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
          >
            <option value="">Todas</option>
            <option *ngFor="let suc of sucursales" [value]="suc.id">{{ suc.nombre }}</option>
          </select>
        </div>

        <!-- Departamento -->
        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-2">Departamento</label>
          <select
            [(ngModel)]="filtroDepartamento"
            (change)="filtrar()"
            class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
          >
            <option value="">Todos</option>
            <option *ngFor="let depto of departamentos" [value]="depto.id">{{ depto.nombre }}</option>
          </select>
        </div>

        <!-- Estado -->
        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-2">Estado</label>
          <select
            [(ngModel)]="filtroEstado"
            (change)="filtrar()"
            class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
          >
            <option value="">Todos</option>
            <option value="ACTIVO">Activo</option>
            <option value="INACTIVO">Inactivo</option>
          </select>
        </div>
      </div>
      
      <!-- Contador -->
      <div class="mt-3 text-sm text-gray-600">
        Mostrando <span class="font-bold text-red-600">{{ empleadosFiltrados.length }}</span> de <span class="font-bold">{{ empleados.length }}</span> empleados
      </div>
    </div>

    <!-- TABLA RESPONSIVA -->
    <div class="bg-white rounded-lg border border-gray-200 overflow-hidden shadow-sm">
      <!-- Loading State -->
      <div *ngIf="loading" class="p-12 flex flex-col items-center justify-center">
        <div class="w-12 h-12 rounded-full border-4 border-red-200 border-t-red-600 animate-spin mb-4"></div>
        <p class="text-gray-600 text-sm">Cargando empleados...</p>
      </div>

      <!-- Empty State -->
      <div *ngIf="!loading && empleadosFiltrados.length === 0" class="p-12 text-center">
        <div class="text-gray-400 mb-2 text-3xl">ðŸ“­</div>
        <p class="text-gray-600 font-medium">No se encontraron empleados</p>
        <p class="text-gray-500 text-sm mt-1">Intenta ajustar tus filtros de bÃºsqueda</p>
      </div>

      <!-- Tabla -->
      <div *ngIf="!loading && empleadosFiltrados.length > 0" class="overflow-x-auto">
        <table class="w-full text-sm">
          <thead class="bg-gray-50 border-b border-gray-200">
            <tr>
              <th class="px-6 py-4 text-left font-semibold text-gray-900">Empleado</th>
              <th class="px-6 py-4 text-left font-semibold text-gray-900 hidden md:table-cell">UbicaciÃ³n</th>
              <th class="px-6 py-4 text-left font-semibold text-gray-900 hidden lg:table-cell">Puesto</th>
              <th class="px-6 py-4 text-left font-semibold text-gray-900 hidden lg:table-cell">Turno</th>
              <th class="px-6 py-4 text-left font-semibold text-gray-900">Estado</th>
              <th class="px-6 py-4 text-right font-semibold text-gray-900">Acciones</th>
            </tr>
          </thead>
          <tbody class="divide-y divide-gray-200">
            <tr *ngFor="let emp of empleadosFiltrados" class="hover:bg-gray-50 transition-colors">
              <!-- Empleado con Avatar -->
              <td class="px-6 py-4">
                <div class="flex items-center gap-3">
                  <div class="w-10 h-10 bg-red-600 rounded-full flex items-center justify-center text-white font-bold text-sm flex-shrink-0">
                    {{ emp.nombres?.charAt(0) || '?' }}{{ emp.apellidos?.charAt(0) || '?' }}
                  </div>
                  <div class="min-w-0">
                    <p class="font-semibold text-gray-900 truncate">{{ emp.nombres }} {{ emp.apellidos }}</p>
                    <p class="text-xs text-gray-500 truncate">{{ emp.email }}</p>
                  </div>
                </div>
              </td>

              <!-- UbicaciÃ³n (Sucursal + Depto) -->
              <td class="px-6 py-4 hidden md:table-cell">
                <div class="text-sm">
                  <p class="text-gray-900 font-medium">{{ emp.nombre_sucursal || 'â€”' }}</p>
                  <p class="text-xs text-gray-500">{{ emp.nombre_departamento || 'â€”' }}</p>
                </div>
              </td>

              <!-- Puesto -->
              <td class="px-6 py-4 hidden lg:table-cell">
                <p class="text-sm text-gray-900">{{ emp.nombre_puesto || 'â€”' }}</p>
              </td>

              <!-- Turno -->
              <td class="px-6 py-4 hidden lg:table-cell">
                <span class="px-2 py-1 bg-blue-50 text-blue-700 rounded text-xs font-medium">
                  {{ emp.nombre_turno || 'â€”' }}
                </span>
              </td>

              <!-- Estado -->
              <td class="px-6 py-4">
                <button
                  (click)="toggleEstado(emp)"
                  [class.bg-green-100]="emp.estado === 'ACTIVO'"
                  [class.text-green-700]="emp.estado === 'ACTIVO'"
                  [class.bg-red-100]="emp.estado === 'INACTIVO'"
                  [class.text-red-700]="emp.estado === 'INACTIVO'"
                  class="px-2.5 py-1 rounded-full text-xs font-semibold hover:opacity-80 transition-opacity cursor-pointer"
                >
                  {{ emp.estado === 'ACTIVO' ? 'âœ“ Activo' : 'âœ• Inactivo' }}
                </button>
              </td>

              <!-- Acciones -->
              <td class="px-6 py-4 text-right">
                <div class="flex justify-end gap-2">
                  <button
                    (click)="verDetalles(emp)"
                    class="p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors"
                    title="Ver detalles"
                  >
                    <i class="bi bi-eye"></i>
                  </button>
                  <button
                    (click)="editarEmpleado(emp.id)"
                    class="p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors"
                    title="Editar"
                  >
                    <i class="bi bi-pencil"></i>
                  </button>
                  <button
                    (click)="eliminarEmpleado(emp)"
                    class="p-2 text-gray-500 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors"
                    title="Eliminar"
                  >
                    <i class="bi bi-trash"></i>
                  </button>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

  </div>
</div>
