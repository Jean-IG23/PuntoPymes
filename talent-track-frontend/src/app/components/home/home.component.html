<div class="home">
  <!-- SECCIÓN AUTENTICADA -->
  <div *ngIf="isLoggedIn" class="home__authenticated">
    
    <!-- HEADER DE BIENVENIDA -->
    <section class="welcome-section">
      <div class="welcome-container">
        <div>
          <h1 class="welcome-title">Panel de Control</h1>
          <p class="welcome-subtitle">Bienvenido, <span class="font-semibold">{{ userName | titlecase }}</span></p>
        </div>
      </div>
    </section>

    <!-- WIDGET DE ASISTENCIA RÁPIDA -->
    <section class="section-spacing">
      <app-attendance-quick-marker></app-attendance-quick-marker>
    </section>

    <!-- ESTADÍSTICAS PARA GESTORES -->
    <section *ngIf="auth.isManagement()" class="section-spacing">
      <h2 class="section-title">Resumen de Equipo</h2>
      <div class="kpi-grid">
        
        <!-- KPI 1: Empleados Activos -->
        <div class="kpi-card">
          <div class="kpi-card-header">
            <div class="kpi-icon kpi-icon-blue">
              <i class="ri-team-line"></i>
            </div>
            <div class="kpi-info">
              <p class="kpi-label">Total Empleados</p>
              <div *ngIf="loadingStats" class="skeleton"></div>
              <p *ngIf="!loadingStats" class="kpi-value">{{ stats.totalEmpleados }}</p>
            </div>
          </div>
          <div class="kpi-footer">
            <span class="kpi-trend">+2 este mes</span>
          </div>
        </div>

        <!-- KPI 2: Presentes Hoy -->
        <div class="kpi-card">
          <div class="kpi-card-header">
            <div class="kpi-icon kpi-icon-green">
              <i class="ri-check-double-line"></i>
            </div>
            <div class="kpi-info">
              <p class="kpi-label">Presentes Hoy</p>
              <div *ngIf="loadingStats" class="skeleton"></div>
              <p *ngIf="!loadingStats" class="kpi-value">{{ stats.presentesHoy }}</p>
            </div>
          </div>
          <div class="kpi-footer">
            <span class="kpi-trend kpi-trend-green">✓ En la oficina</span>
          </div>
        </div>

        <!-- KPI 3: Solicitudes Pendientes -->
        <div class="kpi-card kpi-card-clickable" (click)="navigateTo('/solicitudes')" [routerLink]="'/solicitudes'">
          <div class="kpi-card-header">
            <div class="kpi-icon kpi-icon-red">
              <i class="ri-mail-check-line"></i>
            </div>
            <div class="kpi-info">
              <p class="kpi-label">Por Aprobar</p>
              <div *ngIf="loadingStats" class="skeleton"></div>
              <p *ngIf="!loadingStats" class="kpi-value">{{ stats.solicitudesPendientes }}</p>
            </div>
          </div>
          <div class="kpi-footer">
            <span class="kpi-trend kpi-trend-red">⚠ Requieren acción</span>
          </div>
        </div>

        <!-- KPI 4: Asistencia Promedio -->
        <div class="kpi-card">
          <div class="kpi-card-header">
            <div class="kpi-icon kpi-icon-purple">
              <i class="ri-bar-chart-line"></i>
            </div>
            <div class="kpi-info">
              <p class="kpi-label">Asistencia Promedio</p>
              <div *ngIf="loadingStats" class="skeleton"></div>
              <p *ngIf="!loadingStats" class="kpi-value">{{ stats.asistencia }}%</p>
            </div>
          </div>
          <div class="kpi-footer">
            <span class="kpi-trend">→ Promedio mensual</span>
          </div>
        </div>
      </div>
    </section>

    <!-- MÓDULOS RÁPIDOS -->
    <section class="section-spacing">
      <h2 class="section-title">Acceso Rápido</h2>
      <div class="modules-grid">
        <div 
          *ngFor="let modulo of modulosVisibles" 
          [routerLink]="modulo.ruta"
          class="module-card"
          [attr.data-color]="modulo.color"
        >
          <div class="module-icon">
            <i [ngClass]="modulo.icono"></i>
          </div>
          <h3 class="module-title">{{ modulo.nombre }}</h3>
          <p class="module-description">{{ modulo.descripcion }}</p>
        </div>
      </div>
    </section>
  </div>

  <!-- SECCIÓN PÚBLICA (No autenticado) -->
  <div *ngIf="!isLoggedIn" class="home__public">
    <div class="public-hero">
      <div class="hero-content">
        <h1 class="hero-title">TalentTrack</h1>
        <p class="hero-subtitle">Sistema de Gestión de Recursos Humanos</p>
        <p class="hero-description">
          Gestiona tu equipo de forma eficiente con nuestro sistema completo de administración de personal
        </p>
        <a routerLink="/login" class="btn-primary">
          <span>Iniciar Sesión</span>
          <i class="ri-arrow-right-line"></i>
        </a>
      </div>
    </div>
  </div>
</div>
